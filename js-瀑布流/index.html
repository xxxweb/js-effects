<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        img{
            vertical-align: top;
        }
        .main{
            position: relative;
        }
        .main .box{
              padding: 4px 0 0 4px;
             position: absolute;
        }
        .main .box .pic{
            border: 1px solid #e3e3e3;
            border-radius: 4px;
            padding: 10px;
        }
        .main .box .pic img{
            width: 220px;
        }
    </style>
    <script>
        window.onload=function () {
            WaterFull("main","box",5);

            function WaterFull(parent,box,cols) {

              var parent=document.getElementsByClassName(parent)[0];
              var box=parent.getElementsByClassName(box);

              var imgWidth=box[0].offsetWidth;

                parent.style.width=(imgWidth*cols)+"px";
                parent.style.margin="0 auto";

                  var array=[];
                for(var i=0;i<box.length;i++){

                    if(i<cols){

                         array.push(box[i].offsetHeight);

                         box[i].style.left=(i*imgWidth)+"px";

                        box[i].style.top="0";


                    }
                    else{

                        var minHeight=Math.min.apply(Math,array);
                        var index=getArrayIndex(minHeight,array);

                        box[i].style.left=(index*imgWidth)+"px";
                        box[i].style.top=array[index]+"px";


                        array[index]+= box[i].offsetHeight;
                    }
                }
            }
            function getArrayIndex(min,array) {
                for(var i=0;i<array.length;i++){
                    if(min===array[i]){
                        return i;
                    }
                }
                return 0;

            }
        }

    </script>
</head>
<body>
<div class="main">
    <div class="box">
        <div class="pic">
            <img src="images/1.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/8.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/6.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/3.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/9.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/2.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/5.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/8.jpg" alt="">
        </div>
    </div>


    <div class="box">
        <div class="pic">
            <img src="images/5.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/10.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/2.jpg" alt="">
        </div>
    </div>

    <div class="box">
        <div class="pic">
            <img src="images/3.jpg" alt="">
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="images/9.jpg" alt="">
        </div>
    </div>
</div>

</body>
</html>
